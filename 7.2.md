## 7.2 암호화(Encryption)와 키 관리(Key Management)

클라우드 환경에서 보안은 선택이 아닌 필수 요건입니다. 특히 데이터 보안의 핵심은 데이터의 기밀성을 보장하는 암호화와, 이를 가능하게 하는 암호화 키의 체계적인 관리 체계에 있습니다. 본 절에서는 클라우드에서의 암호화 개념과 접근 방식, 그리고 신뢰할 수 있는 키 관리 전략에 대해 상세히 설명드리겠습니다.

### 암호화의 개념과 클라우드 환경에서의 필요성

암호화(Encryption)란, 평문(Plaintext)을 특정 알고리즘과 키를 이용해 암호문(Ciphertext)으로 변환하여, 인가되지 않은 사용자가 데이터를 이해하는 것을 방지하는 일련의 과정입니다. 이는 데이터를 저장하거나 전송하는 동안 기밀성을 유지하는 보안 기술의 근간이 됩니다. 다음과 같은 이유로 클라우드 환경에서는 암호화가 특히 중요합니다.

- 클라우드의 다중 테넌시 환경에서는 여러 고객이 동일한 물리적 인프라를 공유합니다. 암호화 없이 데이터를 저장하거나 보내는 경우, 타 사용자 혹은 악의적인 행동 주체로부터 데이터가 노출될 수 있습니다.
- 클라우드는 물리적인 데이터 경계를 명확히 알기 어려우므로, 지역적인 법률 혹은 컴플라이언스에 따라 암호화를 요구하는 경우가 많습니다. 예: GDPR, HIPAA, PCI-DSS 등.
- 저장 중 정적인 데이터(at-rest)뿐만 아니라 네트워크를 통해 이동 중인 데이터(in-transit)의 손실과 유출도 방지해야 하기 때문에, 전방위적인 암호화 전략이 요구됩니다.

암호화는 일반적으로 데이터가 저장될 때와 전송될 때 각각 다른 방식으로 적용됩니다.

#### 저장 시 암호화 (Encryption at Rest)

저장 시 암호화는 하드디스크, SSD 또는 객체 스토리지(S3, Blob Storage 등)에 저장된 데이터를 암호화하는 기법입니다. 이는 물리적인 저장 매체의 도난, 폐기 혹은 침해 시에도 데이터의 기밀성을 보장합니다. 주요 방안은 다음과 같습니다.

- 볼륨 기반 암호화: AWS EBS, Azure Disk Encryption, Google Persistent Disk Encryption 등은 전체 볼륨을 암호화합니다.
- 파일 기반 암호화: OS 수준에서 파일 단위로 암호화하는 기법입니다.
- 객체 스토리지 기반 암호화: S3, Azure Blob, GCP Cloud Storage는 버킷 레벨 또는 객체 단위에서의 서버 측(server-side) 또는 클라이언트 측(client-side) 암호화를 지원합니다.

서버 측 암호화(Server-side encryption, SSE)의 경우, 암호화 및 복호화 처리를 클라우드 제공자가 담당하며, 클라이언트는 평문 데이터를 업로드하기만 하면 됩니다. 이에 반해 클라이언트 측 암호화(Client-side encryption)는 사용자가 직접 데이터를 암호화한 후 업로드하며, 클라우드는 암호문을 단순 저장만 합니다.

#### 전송 중 암호화 (Encryption in Transit)

전송 시 암호화는 네트워크 상에서 데이터가 이동할 때 기밀성이 유지되도록 전송 경로를 암호화하는 것입니다. 이는 보통 TLS(Transport Layer Security) 프로토콜을 통해 구현됩니다.

- HTTPS, SMTPS 등 표준 프로토콜을 통해 트래픽 암호화
- gRPC, MQTT, WebSocket 등에서도 TLS를 통해 전송 암호화 지원
- 서비스 간 통신 시, 서비스 메시(mesh) 또는 API Gateway를 통한 TLS 종단 간 암호화

많은 클라우드 제공자는 ‘기본적인 암호화 in transit’을 모든 서비스에서 기본 옵션으로 제공합니다. 그러나 민감한 데이터의 경우 사용자 레벨에서 인증서 및 키 관리를 더욱 강화할 필요가 있습니다.

### 암호화의 분류: 대칭키 vs 비대칭키

암호화는 키의 종류에 따라 아래 두 가지 방식으로 구분됩니다.

- 대칭키 암호화(Symmetric encryption): 암호화와 복호화에 동일한 키를 사용하는 방식입니다. 속도가 빠르고 계산량이 적으며, 저장 또는 데이터베이스 암호화에 적합합니다. 대표적인 알고리즘은 AES-256입니다.
- 비대칭키 암호화(Asymmetric encryption): 공개키(Public Key)로 암호화하고, 개인키(Private Key)로 복호화하는 구조입니다. 보안성이 뛰어나지만 연산 부하가 크므로, 주로 키 교환 혹은 짧은 메시지 보호 등에 사용됩니다. RSA, ECC 알고리즘이 이에 해당합니다.

대부분의 클라우드 아키텍처에서는 두 방식의 하이브리드 조합을 사용합니다. 예를 들어 TLS 통신에서 각 클라이언트는 비대칭키 기반으로 세션 키(대칭키)를 교환한 후, 실제 데이터는 성능이 우수한 대칭키로 암호화하여 주고받습니다.

### 키 관리의 필요성과 전략

암호화의 보안성은 알고리즘보다는 키 관리에 달려 있다고 해도 과언이 아닙니다. 키가 유출되거나 노출되는 경우 암호화된 데이터를 보호할 수 없습니다. 따라서 안전하고 규정에 부합하는 키 관리(KMS: Key Management Service) 전략 구축이 필수적입니다.

키 관리에서 주요 고려 사항은 다음과 같습니다.

- 키 생성: 신뢰할 수 있는 엔트로피 소스와 알고리즘 기반으로 예측 불가능한 키를 생성해야 합니다.
- 키 저장: 키는 안전한 장소(예: HSM, Hardware Security Module)에 보관되어야 하며, 평문 형태로 저장되어서는 안 됩니다.
- 키 순환(Key rotation): 정기적으로 키를 교체함으로써 장기 노출의 위험성을 줄이고, 만일 키가 유출되더라도 피해를 최소화해야 합니다.
- 키 접근 제어: 암호화 키는 최소 권한 원칙(least privilege)에 따라 엄격하게 접근 통제되어야 하며, 감사를 통한 추적이 가능해야 합니다.
- 키 복구 및 백업: 실수 또는 하드웨어 장애에 대비하여 키의 안전한 백업 및 복구 체계를 마련해야 합니다.

### 클라우드 제공자의 KMS(Key Management Service)

대부분의 주요 클라우드 제공자는 자체적인 키 관리 서비스를 통해 안전하고 자동화된 키 수명 주기 관리를 제공합니다.

- AWS KMS(Amazon Key Management Service)
    - KMS-managed key, customer-managed key, customer-provided key로 세분화 가능
    - CloudTrail을 통한 키 사용 로깅
    - FIPS 140-2 인증 HSM 기반
- Azure Key Vault
    - 키, 인증서, 비밀번호, 시크릿 등 통합적으로 관리
    - 접근 정책 기반 상세한 RBAC 설정 가능
    - 서비스 간 안전한 통합을 위한 관리형 ID 지원
- Google Cloud KMS
    - Cloud HSM과 통합 가능
    - CMEK(Customer-Managed Encryption Key), CSEK(Customer-Supplied Encryption Key) 지원
    - Key versioning 및 정책 기반 보호 지원

이들 서비스를 사용하면 키의 생성, 저장, 회전, 만료, 감사 등을 자동 또는 수동으로 관리할 수 있어, 보안성을 확장성과 함께 확보할 수 있습니다.

### Bring Your Own Key(BYOK)와 Hold Your Own Key(HYOK)

일부 보안/컴플라이언스가 중요한 영역에서는 조직이 클라우드 제공자의 키 관리를 신뢰하지 않고, 직접 키를 제공하거나 심지어 전적으로 키를 관리하기도 합니다. 이에 따라 다음과 같은 접근이 존재합니다.

- BYOK (Bring Your Own Key): 사용자 조직이 외부에서 생성한 키를 클라우드 공급자의 KMS에 가져와 사용하는 방식입니다. 이를 통해 조직은 키 생성의 통제력을 유지할 수 있으면서도 클라우드의 관리 편의성을 활용할 수 있습니다.
- HYOK (Hold Your Own Key): 키 자체를 클라우드 외부에 보관, 관리하며 클라우드는 해당 키를 호스팅하지 않습니다. HSM 또는 온프레미스 KMS와 연동하는 경우가 많으며, 규제가 매우 엄격한 환경(예: 금융, 국방)에서 채택됩니다.

이러한 방식은 높은 통제력을 보장하지만 구현 복잡도가 크고 성능, 가용성 측면에서 고려가 필요합니다.

### 감사(Logging) 및 컴플라이언스 관점의 고려

암호화와 키 관리가 제대로 작동하더라도, 이를 감사하고 추적할 수 있는 메커니즘이 없다면 규제 준수(compliance)라는 관점에서 문제가 발생할 수 있습니다. 다음은 기업이 고려해야 할 요소입니다.

- 키 사용 이력 추적: 누가 언제 어떤 데이터에 대해 어떤 키로 작업했는지 완전한 로깅이 필요합니다.
- 정책 기반 감시: 특정 액션(예: 복호화 요청)이 허용된 정책 범위 내에서 이뤄졌는지 자동화된 검사 체계를 갖춰야 합니다.
- Alerting: 키 접근 실패, 다중 복호화 시도 등 이상 징후 발생 시 자동 알림 설정
- 감사 로그 저장소와 암호화 병행 고려: 로그 자체도 민감 정보가 포함될 수 있어 이중 암호화를 적용하는 것이 일반적입니다.

### 실제 적용 사례: 암호화 기반 RDS 접근 보호

Amazon RDS를 활용하여 사용자 개인정보를 저장하는 금융 앱 사례를 들어 살펴보겠습니다.

- RDS 인스턴스 생성 시 AES-256 기반 키를 사용하여 저장 데이터 자동 암호화 활성화
- 해당 키는 조직의 BYOK로 AWS KMS에 가져온 customer-managed key 사용
- 키에 대해 필요한 IAM 정책만 할당, 개발자는 읽기 전용 권한만 부여
- API Gateway에서 TLS 1.2 기반 HTTPS 통신 사용
- 모든 접근 및 키 사용은 CloudTrail을 통해 로깅되며, 90일간 보관
- 규제 대응을 위한 Security Hub와 연동되어 이벤트가 감지되면 보안 팀에 Slack으로 알림 전송

이 시나리오는 암호화 및 키 관리 전략이 클라우드 내에서 보안성과 규제준수 양쪽을 만족시키는 중요한 사례로 볼 수 있습니다.

### 결론

클라우드 환경에서의 암호화 및 키 관리는 종합적인 보안 전략의 핵심 축입니다. 단순히 기술적 구현을 넘어서 구축, 접근 제어, 감사, 규정 준수까지 고려한 전략이 필요합니다. KMS를 적절하게 활용하되, 민감도에 따라 BYOK나 HYOK도 검토하며, 전 영역(At Rest, In Transit)에 걸친 암호화를 구현하는 접근이 바람직합니다. 클라우드 아키텍처 설계 시 암호화 로드를 적절히 분산시키고, 키 접근 정책을 최소화하며, 주기적인 키 회전과 경고 체계를 갖춘다면 효율과 보안성을 동시에 확보할 수 있을 것입니다.