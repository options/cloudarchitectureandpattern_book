## 2.2 마이크로서비스 vs. 모놀리식 애플리케이션

클라우드 환경에서 애플리케이션을 설계하고 배포할 때 중요한 판단 기준 중 하나는 시스템 아키텍처의 선택입니다. 개발자는 종종 전통적인 모놀리식(monolithic) 아키텍처와 마이크로서비스(microservices) 아키텍처 사이에서 고민하게 됩니다. 이 절에서는 두 접근 방식에 대한 근본적인 개념과 구조를 살펴보고, 각각의 장단점뿐만 아니라 클라우드 네이티브 환경에서의 적합성까지 고찰하고자 합니다.

### 모놀리식 애플리케이션 아키텍처의 개념과 구조

모놀리식 아키텍처란 모든 애플리케이션 기능이 하나의 단일 프로세스 안에서 긴밀하게 연결된 구조를 의미합니다. 일반적으로 하나의 코드베이스로 관리되며, 사용자 인터페이스, 비즈니스 로직, 데이터 접근 계층이 하나의 배포 단위 안에 구성됩니다.

이 방식의 가장 큰 특징은 다음과 같습니다.

- 단일 애플리케이션으로 패키징되어 배포가 간편합니다.
- 초기 개발 속도가 빠르고, 개발 도구나 프레임워크의 복잡성이 낮습니다.
- 요청 간 호출(함수 호출 등)이 메모리 내에서 이루어지므로 응답 시간이 빠르고 오버헤드가 작습니다.

하지만 시간이 지남에 따라 다음과 같은 문제가 발생할 수 있습니다.

- 코드베이스가 커짐에 따라 유지보수가 어려워지는 경향이 있습니다.
- 각 기능이 강하게 결합되어 있어 기능 하나의 수정이 전체 시스템에 영향을 미칠 수 있습니다.
- 팀 규모가 커질수록 병렬 개발이 어려워집니다.
- 확장(Scale)을 전체 시스템 단위로만 가능하므로 리소스 낭비가 발생할 수 있습니다.

예를 들어, 전자상거래 플랫폼에서 결제, 주문, 상품 검색, 장바구니 기능이 모두 하나의 서비스로 구성된 구조가 여기에 해당합니다. 이러한 시스템은 초기에는 개발과 배포가 용이하지만, 점점 복잡도가 증가하면서 개별 기능의 독립적인 확장과 배포가 어려워지는 한계를 경험하게 됩니다.

### 마이크로서비스 아키텍처의 개념과 구조

마이크로서비스 아키텍처는 대규모 애플리케이션을 작고 자율적인 서비스들로 나누어 구성된 구조를 지칭합니다. 각 마이크로서비스는 독립적인 기능 단위를 갖추고 자율적으로 개발, 테스트, 배포가 가능합니다. 또한 데이터 저장소를 포함한 인프라 구성도 서비스별로 독립적으로 이루어지는 경우가 많습니다.

마이크로서비스는 다음과 같은 특성을 가집니다.

- 서비스 별 단일 책임 원칙(Single Responsibility Principle)을 따릅니다.
- REST, gRPC, 메시징 큐 등 다양한 프로토콜을 기반으로 서비스 간 통신을 합니다.
- 각 서비스가 독립적으로 배포되어 배포 리스크가 줄어들고, 빠른 릴리스를 가능하게 합니다.
- 특정 서비스에 대한 수평적 확장이 가능하여 자원 사용의 최적화를 도모할 수 있습니다.

반면 이 구조는 다음과 같은 복잡성을 수반합니다.

- 서비스 간 통신, 인증, 트랜잭션 관리 등 분산 시스템에 대한 이해가 요구됩니다.
- 서비스 수가 많아질수록 모니터링, 로깅, 트래픽 관리가 어려워질 수 있습니다.
- 서비스 간 데이터 일관성 유지가 어렵고 eventual consistency를 수용해야 하는 사례가 많습니다.

대표적인 사례로는 넷플릭스(Netflix)가 있습니다. 이 회사는 초기에는 모놀리식 Ruby on Rails 기반 시스템을 사용했으나, 사용자 증가와 글로벌 트래픽 분산 이슈로 인해 마이크로서비스 아키텍처로 전환하였습니다. 이후 각 서비스는 독립적으로 실행되며 독자적인 배포 사이클을 운영하고 있습니다.

### 두 아키텍처의 비교

| 항목                   | 모놀리식 아키텍처                | 마이크로서비스 아키텍처              |
|----------------------|-------------------------------|----------------------------------|
| 아키텍처 구조          | 단일 애플리케이션                  | 작은 독립 서비스들의 집합              |
| 독립 배포               | 불가능                           | 가능                              |
| 개발 복잡도            | 낮음                             | 높음                              |
| 확장성                | 전체 배포 단위로 확장해야 함         | 필요한 서비스만 선택적으로 확장 가능     |
| 장애 격리               | 어렵고, 시스템 전체에 영향 가능        | 개별 서비스 장애는 전체 서비스에 영향 적음  |
| 데이터 저장소 관리       | 공통 데이터베이스 사용               | 서비스 별 전용 데이터베이스 권장         |
| 초기 비용 및 학습 곡선    | 낮음                             | 높음                              |
| DevOps 및 자동화 필요성 | 낮음                             | 높음                              |

### 선택 기준과 고려사항

어떤 애플리케이션 아키텍처를 선택할지는 다음과 같은 질문들에 대한 답을 통해 결정해야 합니다.

- 시스템의 크기: 작은 프로젝트나 MVP(최소요건제품) 단계에서는 모놀리식이 더 적합할 수 있습니다.
- 팀 규모와 조직 구조: 독립적인 팀 단위 개발이 가능할 경우 마이크로서비스의 이점을 얻을 수 있습니다.
- 배포 빈도와 요구 수준: 마이크로서비스는 높은 배포 빈도에 유리하며, 롤백 및 A/B 테스트 등도 수월하게 할 수 있습니다.
- 기술 다양성 허용 여부: 각각의 서비스를 다른 기술로 구현할 필요가 있을 경우 마이크로서비스가 유리합니다.
- 성능 요구사항: 초기에 높은 성능이 요구되고 오버헤드가 민감할 경우 모놀리식이 접근성이 좋습니다.

### 클라우드 네이티브 환경과의 적합성

클라우드 네이티브 아키텍처의 본질은 독립 배포성, 탄력성(Resilience), 자동화, 확장성에 있으며, 이는 마이크로서비스 아키텍처와 깊은 친화성을 보입니다. 컨테이너 기술(Kubernetes, Docker의 오케스트레이션), 서비스 메시(mesh), 서버리스(serverless) 컴퓨팅 등 다양한 클라우드 기반 기술들은 마이크로서비스와 함께 사용할 때 가장 큰 효과를 발휘합니다.

즉, 클라우드 환경에서 시스템을 탄력적으로 운영하고, CI/CD 파이프라인을 활용한 빠른 개발을 원한다면 마이크로서비스가 전략적으로 적합합니다. 반면, 특정 프로젝트가 단기적이거나 요구사항이 단순하다면 모놀리식이 초기 구축에 더 빠른 ROI를 제공할 수 있습니다.

특히, DevOps 문화를 도입하고 조직이 팀별 자율성을 추구할 경우 마이크로서비스 기반의 설계가 기술적, 조직적 모두에서 유연함을 제공합니다. 하지만 마이크로서비스는 그 자체가 목적이 아니라 수단이라는 점을 명심해야 합니다. 자칫하면 정합성과 복잡성의 늪에 빠질 수 있기 때문입니다.

### 결론

마이크로서비스와 모놀리식 아키텍처는 상호 배타적인 선택지가 아니라, 각자의 용도와 상황에 따라 적절한 전략입니다. 단순성과 일관성이 중요한 프로젝트에서는 모놀리식이 여전히 유효한 접근입니다. 반면 복잡성이 높은 시스템을 독립적으로 관리하고자 할 때에는 마이크로서비스가 더 큰 민첩성과 유연성을 제공합니다.

궁극적으로는 조직의 기술 성숙도, 운영 문화, 배포 전략, 비즈니스 요구사항을 종합적으로 고려하여 올바른 아키텍처를 선택하셔야 합니다. 그리고 필요시에는 점진적인 전환 전략(예: 모듈화 후 점진적 서비스 분리)을 병행하는 것도 현실적인 대안이 될 수 있습니다.