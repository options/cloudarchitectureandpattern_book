## 5.1 관계형(RDB)과 비관계형(NoSQL) 데이터베이스의 선택 기준

클라우드 환경에서 데이터 저장소는 애플리케이션의 수명주기 전반에 걸쳐 중요한 역할을 담당합니다. 특히, 클라우드 네이티브 아키텍처는 각각의 구성 요소가 독립적으로 배포되고 확장될 수 있기 때문에, 데이터 저장소 또한 아키텍처적 요구사항에 따라 유연하게 선택되어야 합니다. 이에 따라 관계형(Relational Database, 이하 RDB)과 비관계형(Non-relational Database, 이하 NoSQL) 데이터베이스 중 어떤 기술을 선택할 것인가는 전반적인 시스템의 안정성, 확장성, 관리 효율성 등에 큰 영향을 줍니다.

이 절에서는 RDB와 NoSQL의 개념적 차이, 주요 특성, 그리고 클라우드 환경에서의 적용 기준을 중심으로 설명드리고, 실사용 사례를 통해 두 기술의 선택 기준을 구체화하겠습니다.

### 관계형 데이터베이스란 무엇인가

관계형 데이터베이스는 데이터를 정형화된 테이블 형태로 저장하며, 고정된 스키마(schema)에 따라 데이터를 조직화합니다. 테이블 간에는 일대일, 일대다, 다대다와 같은 관계성을 정의할 수 있어 데이터의 무결성과 정합성을 보장하는 데 유리합니다.

대표적인 관계형 데이터베이스 관리 시스템(RDBMS)으로는 다음과 같은 제품들이 있습니다:

- Oracle Database
- PostgreSQL
- Microsoft SQL Server
- MySQL / MariaDB
- Amazon RDS (Relational Database Service)
- Google Cloud SQL 및 Cloud Spanner

RDB의 주요 특성은 다음과 같습니다:

- 정형화된 구조: 스키마 기반 모델을 사용하여 데이터 정합성을 사전에 검증 가능
- 표준 질의 언어(SQL): 선언적 언어로 데이터 CRUD(Create, Read, Update, Delete) 작업 수행
- 트랜잭션 기반 처리: ACID 속성(Atomicity, Consistency, Isolation, Durability)을 기반으로 높은 무결성 보장
- 관계 모델: JOIN 연산을 통해 다양한 테이블 간의 복잡한 질의 처리 가능

### 비관계형 데이터베이스란 무엇인가

비관계형, 즉 NoSQL 데이터베이스는 스키마 유연성과 수평 확장이 용이한 구조를 바탕으로 등장하였습니다. 웹 규모의 애플리케이션, IoT, 로그 분석 등 비정형 데이터 및 고속 처리 요구사항에 적합한 솔루션입니다.

NoSQL은 여러 하위 유형으로 구분됩니다:

- 문서 기반(Document-based): MongoDB, Couchbase, Amazon DocumentDB
- 키-값(Key-Value): Redis, DynamoDB, Riak
- 열 기반(Column-family): Apache Cassandra, HBase
- 그래프(Graph): Neo4j, Amazon Neptune

이러한 NoSQL 데이터베이스는 아래와 같은 특징을 가집니다:

- 스키마 유연성: 데이터 구조가 동적으로 정의되거나 아예 필요 없는 경우도 있음
- 수평 확장성: 샤딩(sharding)을 통한 대규모 수평 확장에 최적화
- 단순화된 질의 인터페이스: 일부 제품은 SQL 유사 문법을 제공하지만 일반적으로 쿼리 기능은 간결하며 제한적임
- 일관성 모델 다양성: 대부분 BASE 원칙(Basically Available, Soft-state, Eventually consistent)을 따름

### 선택 기준: RDB vs NoSQL

두 데이터베이스 유형은 서로를 대체하기보다, 각각의 특성과 요구사항에 따라 선택되어야 합니다. 클라우드 환경에서는 이 선택을 더욱 정교하게 해야 하며, 다음과 같은 기준을 적용하시는 것이 적절합니다.

#### 1. 데이터 구조 및 정합성 요구
- 데이터가 명확한 스키마를 따르고, 정규화된 구조며 JOIN이 자주 사용된다면 RDB를 고려해야 합니다.
- 반면, 데이터 구조가 유동적이거나, 중첩된 JSON 형식의 비정형 데이터를 저장하고자 할 경우 NoSQL(특히 문서형 DB)이 적합합니다.

예: 고객 주문 데이터와 같은 트랜잭션 정보는 정합성을 보장해야 하므로 RDB가 적합하고, 유저의 소셜 피드나 활동 로그 등은 NoSQL이 적합합니다.

#### 2. 확장성 및 성능 요구
- 관계형 DB는 수직 확장(scale-up)에 적합하며, 고도화된 인덱싱 및 복잡한 쿼리를 수행하는 데 강점이 있습니다.
- NoSQL은 기본적으로 수평 확장(scale-out)을 지향하며, 대규모 사용자 요청과 데이터를 빠르게 분산 처리할 수 있습니다.

예: e-커머스의 글로벌 트래픽 대응을 위해 캐시용으로 DynamoDB 또는 Redis를 활용할 수 있습니다.

#### 3. 조회 패턴
- 읽기 성능과 예측 가능성이 높고, 정해진 조회방식이 명확하다면 RDB 모델이 유리합니다.
- 다양한 접속 주체와 조회 시나리오가 있고, 유연한 인덱스와 뷰를 따르지 않는 API 기반 조회 형태라면 NoSQL이 적극 유용합니다.

예: 검색 기능이 중요한 시스템에서는 Elasticsearch와 같은 특화형 NoSQL 도입이 효과적입니다.

#### 4. 트랜잭션과 일관성
- ACID 트랜잭션이 필수적이라면 RDB만이 해당 요구를 만족시킬 수 있습니다.
- NoSQL은 CAP 이론에 따라 가용성과 파티션 허용성을 우선시한 구조이며, 일관성 보장이 최종적(eventually consistent)인 경우가 많습니다.

예: 금융, 회계, 인벤토리관리(import-export) 시스템은 RDB를 통해 강한 일관성이 필요합니다.

#### 5. 운영 및 관리 편의성
- 클라우드 벤더들이 제공하는 관리형 서비스(RDS, Cloud SQL, DynamoDB 등)를 사용할 경우, 운영 복잡도는 크게 줄어듭니다.
- NoSQL은 종종 설계부터 샤딩, 백업, 복원, TTL 설정 등 운영 전략을 요구하며 일정 수준의 전문가 개입이 필요합니다.

### 실제 적용 사례와 혼합 전략

현대의 대규모 애플리케이션에서는 RDB와 NoSQL을 혼합하여 사용하는 경우가 많습니다. 예를 들어, 트랜잭션 DB는 RDB에 저장하되, 고속 조회와 지연 허용이 가능한 로그, 세션 정보, 캐시 등은 NoSQL로 분리하는 전략이 일반화되어 있습니다.

예시 1: 넷플릭스(Netflix)는 글로벌 사용자 기반에 맞추기 위해 캐시 및 고속 조회는 AWS의 DynamoDB로 처리하며, 재무 관련 세부 데이터는 RDBMS 기반 솔루션을 사용합니다.

예시 2: 전자상거래 플랫폼에서는 PostgreSQL을 통해 상품 정보, 사용자, 결제 등의 핵심 데이터를 저장하고, 사용자 활동 로그는 Elasticsearch에 저장하여 분석에 사용합니다.

### 클라우드에서의 데이터베이스 선택 가이드

실제 클라우드 환경에서는 관계형 또는 비관계형 DB 선택 시 다음의 요소들을 함께 고려하셔야 합니다:

- 벤더별 지원 상황 및 서비스 수준 (SLAs)
- 로깅 및 모니터링 도구와의 통합성
- VPC, PrivateLink, IAM과의 연동 등 보안 설계
- 데이터 암호화 지원 (at rest, in transit)
- 사용량 기반의 과금 모델 적합성

예를 들어, AWS에서는 다음과 같은 선택이 가능합니다:

- Amazon RDS: MySQL, PostgreSQL, Oracle, SQL Server 등을 관리형으로 제공
- Amazon Aurora: 자체 개발한 RDB 기반, MySQL과 PostgreSQL 호환
- Amazon DynamoDB: 서버리스 기반의 key-value 및 문서 지향 NoSQL
- Amazon ElastiCache: Redis 및 Memcached 캐싱 전용 NoSQL

Google Cloud 및 Azure도 동일하게 RDB/NoSQL 선택지를 제공하며, 선택에 앞서 반드시 응답 지연 요구사항, 데이터의 정합성 수준, 읽기/쓰기 비율 등을 고려한 사전 설정이 필요합니다.

### 맺으며

RDB와 NoSQL 데이터베이스는 서로 대체가 아닌 상호 보완적인 기술입니다. 클라우드 네이티브 아키텍처의 다양한 흐름 속에서, 각 저장소 유형의 특성과 애플리케이션 요구사항을 면밀히 연결짓는 사고가 매우 중요합니다. 단일한 기준 없이, 기능적 요구사항을 분석하고 실행 데이터에 대한 이해를 바탕으로 선택 하시는 것이 가장 중요하며, 필요한 경우 폴리글랏 퍼시스턴스(Polyglot Persistence) 전략을 통해 두 기술을 자연스럽게 공존시키는 것이 바람직합니다. 항상 유연성과 유지보수성, 운영 복잡도, 클라우드 벤더 종속성 등의 요소를 함께 고려하시길 권장드립니다.