## 3.3 성능(Performance), 비용 최적화(Cost Optimization)

클라우드 아키텍처를 설계할 때 성능과 비용 최적화의 균형을 맞추는 것은 가장 복잡하면서도 중요한 과제 중 하나입니다. 성능은 사용자 경험과 직접적으로 연결되며, 동시에 과도한 리소스 사용은 비용 증가로 이어질 수 있으므로 두 요소는 서로 긴밀하게 영향을 주고받습니다. 본 절에서는 클라우드 환경에서 성능을 최적화하면서도 비용을 효율적으로 관리할 수 있는 다양한 전략, 주요 고려사항, 실제 사례를 중심으로 심층적으로 살펴보겠습니다.

### 성능(Performance) 최적화 전략

성능 최적화는 응답 시간 감소, 처리량 증가, 지연 시간 최소화 등을 목표로 합니다. 다음과 같은 다양한 영역에서 성능 튜닝이 가능합니다.

#### 1. 컴퓨팅 리소스의 적절한 선택

클라우드 서비스 제공자는 다양한 VM 인스턴스 유형을 제공합니다. CPU, 메모리, GPU 성능 등의 요소를 고려하여 워크로드에 최적화된 VM을 선택하는 것이 중요합니다.

- 예를 들어, AWS에서는 일반용(bursty) t3 인스턴스, 고성능 연산용 c6g 인스턴스, 메모리 집약형 r5 인스턴스 등으로 세분화되어 있습니다.
- 머신 러닝 모델 학습을 위해 GPU가 필요한 경우, Google Cloud의 A100 GPU 인스턴스나 Azure의 NC 시리즈를 고려할 수 있습니다.

인프라 구성 시 `초기 선택`이 잘못되면, 과도한 비용이나 리소스 병목을 초래할 수 있으므로 실제 부하 유형에 따른 프로파일링 후 결정해야 합니다.

#### 2. 수평적 확장(Scale-out) 및 오토스케일링(Auto-scaling)

수직 확장(scale-up)은 한계가 명확하므로, 대부분의 클라우드 네이티브 아키텍처에서는 수평 확장(scale-out)이 권장됩니다. Kubernetes, ECS, App Engine 등 플랫폼은 요청 수에 따라 인스턴스 수를 자동 조절하는 기능을 제공합니다.

- 오토스케일링 정책을 구성할 때, CPU, 메모리 사용량 외에도 요청 수, 큐 길이, 애플리케이션 레벨 지표를 기반으로 설정하는 것이 바람직합니다.
- 예를 들어, Amazon EC2 Auto Scaling 그룹은 타겟 추적 스케일링 정책(Target Tracking Scaling Policy)을 통해 애플리케이션의 상태 지표에 따라 자동 조절이 가능합니다.

#### 3. 캐싱 계층의 도입

빈번한 요청에 대해 매번 DB나 원격 API를 호출하면 지연 감소에 한계가 있으므로, Redis, Memcached 등을 활용하여 데이터 또는 렌더링 결과를 캐싱 처리하는 전략이 효과적입니다.

- HTML 페이지 캐싱, 보통의 읽기 중심 REST API 응답 캐싱 등의 경우, CDN(예: CloudFront, Cloud CDN)을 활용하면 네트워크 병목도 줄일 수 있습니다.
- 데이터베이스 쿼리 결과를 Redis에 저장하고 요청 쿠키 정보나 쿼리 파라미터로 캐싱 키를 구성하는 전략이 널리 사용됩니다.

#### 4. 비동기 처리와 큐 기반 아키텍처 적용

동기적인 처리 체계는 애플리케이션의 TPS(Transactions Per Second)를 제한하게 됩니다. 대량 IO 처리를 요구하거나 지연에 둔감한 작업이라면 큐 기반 아키텍처를 도입하여 성능을 분산시킬 수 있습니다.

- AWS SQS, Azure Service Bus, Google Pub/Sub 등의 메시지 큐 기술은 개별 작업을 분산하고 처리 속도를 조정할 수 있는 유연성을 제공합니다.
- 비동기화된 백엔드 워크로드 처리 구조는 API 응답 속도를 빠르게 유지하면서도, 배치성 트랜잭션을 안정적으로 처리할 수 있도록 합니다.

### 비용 최적화(Cost Optimization) 전략

클라우드는 사용한 만큼 과금하는 Pay-as-you-go 모델이 기본이며, 이는 자원 낭비 없이 설계한다면 매우 효율적이지만, 잘못 구성된 인프라는 오히려 온프레미스보다 높은 비용을 초래할 수 있습니다. 다음은 클라우드 비용 최적화를 위한 주요 전략들입니다.

#### 1. 불필요한 자원 미사용 및 스케줄링

- 미사용 상태의 인스턴스나 부하가 낮은 오프피크 시간대의 리소스는 가능한 종료하거나 축소해야 합니다.
- 예를 들어, 개발 및 스테이징 환경은 업무 시간이 아닐 경우 자동으로 인스턴스를 중지하는 스케줄러를 구성할 수 있습니다.
  - AWS Instance Scheduler, Google Cloud Scheduler with Cloud Function 조합 등
  - Terraform과 함께 Scheduling 정책을 배포 자동화할 수도 있습니다.

#### 2. 예약 인스턴스 및 Savings Plans 활용

장기적인 워크로드의 경우, 고정 요금제를 사용하면 큰 폭의 할인 혜택을 받을 수 있습니다.

- 예) AWS의 Reserved Instance(RI), Azure의 Reserved VM Instances(RI), Google Cloud의 Committed Use Discounts(CUD)
- 1년 또는 3년 단위로 약정을 맺고 사용량을 고정함으로써, 최대 70%까지 표준 요금 대비 비용 절감이 가능합니다.
- 워크로드 특성과 예상 사용량을 정확히 분석한 후, 온디맨드 대비 어떤 수준의 절감을 이룰 수 있는지를 검토해야 합니다.

#### 3. 스팟 인스턴스(Spot Instance)의 전략적 도입

- 예측 가능한 중단이 허용되는 비핵심 작업, 예를 들어 로그 처리, ETL 작업, 테스트 환경 등의 경우 저가의 스팟 인스턴스를 도입하는 것이 유리합니다.
  - AWS의 Spot Instance, Azure의 Low-priority VM, Google Cloud의 Preemptible VM 활용 가능
- 워크플로우를 컨테이너 기반으로 구성한 뒤, 스팟 노드를 노드풀로 추가하는 방식의 클러스터 구성도 효율적입니다.
- Kubernetes에서는 node affinity와 taints, tolerations를 통해 스팟 인스턴스를 탄력적으로 쓰도록 조정할 수 있습니다.

#### 4. 가시성 확보와 비용 분석 도구 활용

비용 데이터는 단순 집계가 아닌 분석의 대상을 가져야 합니다. 메트릭 기반의 사용량 시각화와 전환 분석이 가능한 도구를 도입하는 것이 비용 절감의 첫 걸음입니다.

- AWS Cost Explorer, Azure Cost Management + Billing, Google Cloud Cost Table 등의 도구는 서비스별·태그별 비용 흐름 분석이 가능합니다.
- 태그 정책을 명확히 정의하여 부서, 팀, 애플리케이션 단위로 리소스 소비를 추적해야 합니다.
  - 예: `Environment=Staging`, `Team=ML`, `Service=OrderApi` 등의 태그 체계 정의

#### 5. 서버리스 및 이벤트 기반 서비스로 전환

서버리스 아키텍처는 트랜잭션 또는 이벤트가 발생했을 때만 과금 되므로, 불규칙한 워크로드나 로우 트래픽 환경인 경우 비용 효율이 뛰어납니다.

- AWS Lambda, Google Cloud Functions, Azure Functions 등의 서버리스 컴퓨팅은 요청 기반 과금이며, IDLE 시간의 비용이 없습니다.
- 특히 정적 API 호출, 간헐적인 트리거 기반 로직의 경우 서버리스로 전환함으로써 비용과 성능을 동시에 만족하는 경우가 많습니다.

### 성능과 비용 최적화의 균형

성능과 비용은 이상적으로 동시에 최적화되기를 바라지만, 대부분의 경우 두 요소가 상충합니다. 다음과 같은 균형점을 도모하는 것이 현실적인 아키텍처 설계 전략입니다.

- 예측 가능한 부하는 예약 인스턴스를, 비예측적인 부하는 스팟이나 서버리스로 대응하십시오.
- 핵심 경로는 고성능 리소스로, 비핵심 경로는 저비용 리소스로 분리하십시오.
- 데이터 분석 파이프라인, 배치성 연산, 로그 처리 등은 스팟 인스턴스나 스케줄링 정책으로 분리 운영합니다.
- 비용 절감을 위해 서비스를 줄이기보다는, SLA, SLO를 기반으로 필요한 수준 이상으로 오버프로비저닝되지 않도록 통제하십시오.

이처럼 성능과 비용은 상호 조율해야 하는 아키텍처의 핵심 축입니다. 특히, 클라우드의 유연성은 양쪽 목표를 동시에 만족시킬 수 있는 다양하고 정교한 수단을 제공하므로, 아키텍트는 이 모든 옵션들을 정리하고 선택적으로 적용하는 통찰력을 가져야 합니다. 의사결정 과정에서 단기적 비용보다는 장기적 유연성과 운영 효율성까지 고려하는 관점을 유지하는 것이 바람직합니다.

### 실제 사례: 비용 최적화를 위한 AWS Lambda 도입

한 전자상거래 기업의 주문 처리 시스템에서 초기에는 EC2 인스턴스를 활용한 REST API 서버로 구성되어 있었습니다. 하루 평균 5천 건의 주문이 있었으며, 주문량이 급증하는 피크 시간대에는 API 서버가 순간적으로 과부하되는 경우가 발생했습니다.

이 기업은 클라우드 비용 최적화와 시스템 안정성 확보를 위해 주문 API를 AWS API Gateway + Lambda 조합으로 재구성하였습니다. 주문 요청은 이벤트 형태로 SQS에 전달되며, Lambda 함수가 트리거되어 백엔드 연산을 처리하도록 변경하였습니다.

결과는 다음과 같습니다:

- EC2 기반의 고정 인프라가 제거되어 약 45%의 비용 절감
- 요청당 지연 시간 절반 수준 감소
- 피크 트래픽에서의 유연한 확장 가능
- Ops 팀의 인프라 관리 부하 감소

이 사례는 대표적으로 서버리스를 통한 성능과 비용의 균형을 훌륭하게 달성한 예입니다.

### 맺음말

클라우드 아키텍처에서 성능과 비용 최적화는 단편적인 기술 적용의 문제가 아닙니다. 경험 기반의 판단, 예측 모델링, 프로파일링, 리소스 이용률 모니터링 등 다양한 기술적, 전략적 접근이 어우러져야 합니다. 클라우드 환경이 제공하는 다양한 유연성과 자동화 기능을 최대한 활용할 수 있도록, 아키텍트는 지속적인 학습과 실증적 실험을 병행해야 할 것입니다. 창의적이고 체계적인 접근을 통해, 비즈니스와 기술 두 측면의 가치를 모두 실현할 수 있습니다.